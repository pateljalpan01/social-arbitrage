# Market-Resonance: Quantitative Sentiment Analysis Engine üöÄ

![Python](https://img.shields.io/badge/Python-3.10%2B-blue)
![AI](https://img.shields.io/badge/AI-FinBERT-orange)
![Status](https://img.shields.io/badge/Status-Operational-brightgreen)

### üìä Project Abstract
Institutional investors often react to news before it hits traditional terminals. **Market-Resonance** is a Quantitative Engineering framework designed to ingest unstructured social data (Twitter/X), filter out high-frequency noise, and use **FinBERT (Financial Large Language Model)** to quantify market sentiment.

**Research Goal:** To investigate the correlation between "Retail Sentiment Velocity" and short-term price action, isolating potential alpha from bot-generated noise.

## üìÇ Project Structure & Data Flow

```text
### üöÄ Core Orchestration
‚îú‚îÄ‚îÄ main.py                # The primary entry point. Orchestrates the infinite loop (Scrape -> Analyze -> Trade).
‚îú‚îÄ‚îÄ login_setup.py         # Independent auth script. Launches browser to generate 'state.json' for session injection.

### üëÅÔ∏è Data Ingestion (The Eyes)
‚îú‚îÄ‚îÄ scraper_engine.py      # Core Playwright logic to scrape social media (Twitter/X) and inject session cookies.
‚îú‚îÄ‚îÄ news_scraper.py        # Auxiliary scraper to fetch traditional financial news headlines for cross-validation.
‚îú‚îÄ‚îÄ market_scanner.py      # Fetches real-time price/volume data to context-check sentiment signals.

### üß† Quantitative Analysis (The Brain)
‚îú‚îÄ‚îÄ analysis_engine.py     # Loads FinBERT model to calculate sentiment Z-scores (-1 to +1) from raw text.
‚îú‚îÄ‚îÄ metrics_engine.py      # Calculates statistical thresholds and signal confidence metrics.

### ‚ö° Execution (The Hands)
‚îú‚îÄ‚îÄ paper_trader.py        # Simulation engine. Logs 'Buy/Sell' orders to CSV and tracks theoretical P&L.

### ‚öôÔ∏è Configuration & State
‚îú‚îÄ‚îÄ config.py              # Central Python configuration (API keys, path constants).
‚îú‚îÄ‚îÄ config_manager.py      # Helper class to dynamically load/update settings during runtime.
‚îú‚îÄ‚îÄ trading_config.json    # JSON file defining risk parameters (Stop-Loss, Take-Profit, Max Positions).
‚îú‚îÄ‚îÄ state.json             # Stores encrypted session cookies for authenticated scraping.

### üìä Outputs & Logs
‚îú‚îÄ‚îÄ sentiment_signals.csv  # Time-series log of all raw sentiment scores generated by FinBERT.
‚îú‚îÄ‚îÄ trade_log.csv          # Ledger of all executed paper trades with entry/exit prices.

### üß™ Debugging & Testing
‚îú‚îÄ‚îÄ debug_brain.py         # Unit test for the Analysis Engine (tests NLP model without scraping).
‚îú‚îÄ‚îÄ debug_news.py          # Unit test for the News Scraper (validates selectors).
```

## üî¨ Methodology: Social-News Latency Arbitrage

The core thesis is that "The Crowd" (Twitter/Retail) reacts to information faster than "The Reporters" (Mainstream News). The model profits from this time gap.

**1. Target Acquisition (The Speedboat Filter)**
* **Scanner:** Ingests "Top Gainers" and "Most Active" tickers from Yahoo Finance.
* **Physics Filter:** Rejects "Cruise Ships" (Market Cap > $50B) and "Paper Planes" (Penny Stocks/Low Volume). It targets only high-volatility mid-cap stocks capable of rapid momentum.

**2. Signal Logic (The Sentiment Gap)**
The engine uses two distinct BERT models to calculate the **Information Asymmetry**:
* **$\Delta S = SocialScore_{FinTwitBERT} - NewsScore_{ProsusAI}$**
* **Buy Trigger:** If **$\Delta S$ is High** (Social is screaming "BUY" but News is silent/neutral), the system identifies a "Pre-News Breakout" and executes an entry.
* **Validation:** If News catches up (News Score spikes), the arbitrage window closes.

**3. Risk Management (The Pilot)**
* **Hard Stop:** Immediate exit if price drops **-1.0%** from entry.
* **Dynamic Ratchet:** Trailing stop activates only after **+$150** profit. If gains retrace **5%** from the peak, profit is locked in.
* **Time Stop:** If price action stagnates for **30 minutes**, the position is liquidated to free up capital (Opportunity Cost protection).

**4. Adaptive Learning**
The bot dynamically adjusts its entry thresholds based on recent performance:
* **Win Rate > 70%:** Lowers filter standards (Aggressive Mode).
* **Win Rate < 40%:** Raises standards to filter noise (Defensive Mode).


## üõ† Tech Stack
* **Core:** Python 3.10+, Pandas, NumPy
* **NLP Models:**
    * `ProsusAI/finbert` (Formal Financial News)
    * `FinTwitBERT` (Social Media Slang/Sentiment)
* **Automation:** Playwright (Chromium Engine)
* **Data Feed:** Yahoo Finance API (Market Data)


## **üìâ Limitations & Observations**

**Signal Decay:** Backtesting suggests sentiment signals are highly time-sensitive. The correlation between "Peak Sentiment" and "Price Action" often degrades within short timeframes, requiring low-latency execution.

**Time window of trading:** The model has shown significantly better results during the opening and closing of the markets, when the variety of news from traditional sources is high, as compared to mid-day when there is a drop in new news articles. 

**Regime Dependency:** The model performs best during high-volatility news events (Earnings, Fed Announcements) but produces lower-confidence signals during low-volume "chop" regimes.


## üöÄ **How to Run (Research Mode)**
Install Dependencies:

```Bash

pip install -r requirements.txt
playwright install
```

Authenticate (Session Injection): Run the handler to generate your local session ticket (prevents detection).
```Bash

python login_setup.py
```

Start the Engine:
```Bash

python main.py --mode=paper_trade
```

<br>
</br>

### ‚ö†Ô∏è_Disclaimer_

_Educational Resource Only. This software is designed for data science research and testing NLP architectures. It is not a financial product and does not guarantee profit. Web scraping may violate specific Terms of Service; users are responsible for their own compliance and rate-limiting._
